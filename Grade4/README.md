# Программа на оценку 4
## Принцип работы программы
Принцип работы программы заключается в чтении файла clients.txt, находящемся в папке с исполняемым файлов, 
и в последовательном создании дочерних процессов.

Передача данных о клиенте дочерним процессам, логику которого они реализуют, осуществляется с помощью shared memory (разделяемой памяти).
Программа производит построчное чтение файла со списком клиентов отеля и, соответственно, на время передачи данных
дочернему процессу осуществляет блокировку соответствующего семафора. После получения процессом необходимой порции данных 
дочерний процесс производит разблокировку семафора и далее продолжается процесс создания клиентских процессов в основном процессе (процесс отеля).

С помощью макросов **SINGLE_ROOMS_COUNT** (по-умолчанию равен 2) и **DOUBLE_ROOMS_COUNT** (по-умолчанию равен 1) в main.c осуществляется регулировка количества различных номеров в отеле - одноместных и двухместных соответственно.

## Пример работы программы
```
clients.txt:
1 0 1
2 1 1
3 1 2
4 1 2
5 0 1

stdout:
[CLIENT-1] started.
[CLIENT-1] rent single room: idx = 0.
[CLIENT-1] waiting 1s.
[CLIENT-2] started.
[CLIENT-2] rent single room: idx = 1.
[CLIENT-2] waiting 1s.
[CLIENT-3] started.
[CLIENT-3] rent double room: idx = 0, gender = 1.
[CLIENT-3] waiting 2s.
[CLIENT-4] started.
[CLIENT-4] rent double room: idx = 0, gender = 1, with_gender = 1.
[CLIENT-4] waiting 2s.
[CLIENT-5] started.
[CLIENT-5] out of service!
[CLIENT-1] end of rent!
[CLIENT-2] end of rent!
[CLIENT-3] end of rent!
[CLIENT-4] end of rent!
```

Видим, что первый клиент был отправлен в одиночную комнату, второй - во вторую одиночную комнату.
Причем стоит обратить внимание, что гонка данных не произошла, несмотря на одинаковое время аренды - это говорит нам о том, что семафоры отработали как надо.

Теперь рассмотрим работу над 3 и 4 клиентами - видим, что они были помещены в двухместные комнаты для жильцов одного пола.
Причем заметим, что программа поместила 4-го клиента в ту же комнату, что и 3-го клиента. Это опять же следствие правильной работы семафоров.

5-го клиента отель не смог обслужить по причине отсутствия мест. 

Заметим, что данные между процессами также были согласованы - это результат правильной реализации работы с разделяемой памятью.